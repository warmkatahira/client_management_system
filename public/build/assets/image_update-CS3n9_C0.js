import{s as d}from"./loading-ChqFcCVw.js";let e;$("#select_image").on("change",function(a){const i=a.target.files[0];if(i){const t=new FileReader;t.onload=function(o){$("#preview").attr("src",o.target.result),e&&e.destroy(),e=new Cropper(document.getElementById("preview"),{aspectRatio:1,viewMode:1,ready:function(){e.setCropBoxData({left:50,top:50,width:100,height:100})}})},t.readAsDataURL(i)}});$("#image_update_modal_open").on("click",function(){$("#image_update_modal").removeClass("hidden")});$(document).on("click",function(a){a.target.classList.contains("image_update_modal_close")&&($("#image_update_modal").addClass("hidden"),$("#preview").attr("src",""),$("#select_image").val(""),e&&(e.destroy(),e=null))});$("#image_update_enter").on("click",function(){window.confirm("更新を実行しますか？")===!0&&(e&&e.getCroppedCanvas().toBlob(i=>{d();const t=e.getData();$("#crop_data_x").val(t.x),$("#crop_data_y").val(t.y),$("#crop_data_width").val(t.width),$("#crop_data_height").val(t.height),$("#update_id").val($(this).data("update-id")),$("#image_update_form").submit()}),e||alert("画像が選択されていません。"))});
